<style>
    .generateNotice {
        margin: 8px 8px 8px 8px;
    }

    .redNotice {
        color: red;
        font-size: 12px;
    }
</style>
<div id="role-commission-calculation" class="row">

    <!-- BEGIN Page specific stuff -->
    <div ng-cloak class="col-md-12 col-sm-12 col-xs-12 main ng-cloak">
        <div class="page-header">
            <h1>Commission Result</h1>
        </div>

        <div class="row">
            <div class="col-md-3">
                <button type="submit" class="btn btn-default" style="margin: 0 10px 10px 0" ng-disabled="service.isCalculating" ng-click="service.generateCommission()">Generate Month Commission <i class="fa  fa-spinner fa-spin" ng-show="service.isCalculating"></i></button>
            </div>
            <div class="col-md-9" ng-show="calculateButton">
                <div class="generateNotice">
                    <label class="redNotice">{{ redNotice }}</label>
                </div>
            </div>
        </div>

        <table class="table table-bordered table-striped table-hover table-condensed">
            <tr>
                <td>Generate Date</td>
                <td>Finish Date</td>
                <td>Commission Of Month</td>
                <td>Number Of Policies</td>
                <td>Download</td>
            </tr>
            <tr ng-repeat="commissionSession in service.commissionCalculationSessions | orderBy:'-createdDateTime'">
                <td>{{ commissionSession.createdDateTime }}</td>
                <td>{{ commissionSession.updatedDateTime ? commissionSession.updatedDateTime : 'Waiting...' }}</td>
                <td>{{ commissionSession.commissionDate | date:'MM/yyyy' }}</td>
                <td>{{ commissionSession.commissionCalculations.length ? commissionSession.commissionCalculations.length : 'Waiting...' }}</td>
                <td>
                    <div ng-show="commissionSession.updatedDateTime">
                        <a target="_blank" href="/api-elife/commissions/calculation-session/download/{{commissionSession.id}}">Download</a>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <!-- END Page specific stuff -->
    <div class="x_panel" ng-repeat="commissionSession in service.commissionCalculationSessions">
        <div class="x_title">
            <h2>Policy information</h2>

            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <table class="table table-striped jambo_table">
                <thead>
                <tr>
                    <td>Policy Id</td>
                    <td>Plan Code</td>
                    <td>Agent Code</td>
                    <td>Payment Code</td>
                    <td>Customer Category</td>
                    <td>Result Code</td>
                    <td>Result Message</td>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="commissionCalculation in commissionSession.commissionCalculations | orderBy:'-createdDateTime'">
                    <td>{{ commissionCalculation.policyNumber }}</td>
                    <td>{{ commissionCalculation.planCode }}</td>
                    <td>{{ commissionCalculation.agentCode }}</td>
                    <td>{{ commissionCalculation.paymentCode }}</td>
                    <td>{{ commissionCalculation.customerCategory }}</td>
                    <td>{{ commissionCalculation.resultCode}}</td>
                    <td>{{ commissionCalculation.resultMessage}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>